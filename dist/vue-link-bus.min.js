/*!
 * vue-link-bus v1.0.0
 * https://github.com/yangmingshan/vue-bus
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueLinkBus=t()}(this,function(){"use strict";function u(e,t,n){return{value:e,pre:t=void 0===t?null:t,next:n=void 0===n?null:n}}function t(){this._events={},this.vmUids={}}var n;t.prototype.$on=function(e,t,n){var r,i=this;if(Array.isArray(e))for(var o=0;o<e.length;o++)this.$on(e[o],t,n);else i._events[e]?(r=u(t,i._events[e]),i._events[e].next=r):(r=u(t,i._events[e]),i._events[e]=r),r.name=e,n&&(i.vmUids[n._uid]?i.vmUids[n._uid].push(r):i.vmUids[n._uid]=[r]),r=null;return i},t.prototype.$off=function(e,t,n){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(e)){for(var i=0;i<e.length;i++)r.$off(e[i],t,n);return r}var o=r._events[e];if(!o)return r;if(!t)return r._events[e]=null,r;for(var u=o;u;){var f=u;t===f.value&&(f.pre?(f.pre.next=f.next,f.next&&(f.next.pre=f.pre)):r._events[e]=null),u=f.pre}return r},t.prototype.$once=function(n,r,i){var o=this;return o.$on(n,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];o.$off(n,r,i),r.apply(void 0,e)},i),o},t.prototype.$clear=function(e){var t=this;if(!e)return t._events=Object.create(null),t;var n=e._uid;if(n){e=t.vmUids[n];if(!e)return t;e.forEach(function(e){e.pre?(e.pre.next=e.next,e.next&&(e.next.pre=e.pre)):e.next?e.next.pre=null:delete t._events[e.name]})}return delete t.vmUids[n],t};var r=!(t.prototype.$emit=function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];var r=this._events[e];if(r)for(var i=r;i;){var o,u=i;u.value&&("function"!=typeof(o=u.value)&&console.error("["+e+"]的回调不是一个函数"),o.apply(void 0,t)),i=u.pre}return this});return function(e){r&&n===e||(r=!0,(n=e).prototype.$bus2=new t,e.mixin({beforeDestroy:function(){this.$bus2.$clear(this)}}))}});